/* Main Layout Rules */

/* Master container grid: 75% / 25% */
.main-container {
  display: grid;
  grid-template-columns: 75% 25%;
  height: 100vh; /* 固定为视口高度，防止整体被聊天消息撑高 */
  min-height: 100vh;
  gap: 12px;
  padding: 12px;
  box-sizing: border-box;
}

/* Primary columns */
.main-column {
  display: grid;
  gap: 20px;
  min-width: 0;
  min-height: 0; /* 允许内部子项在Flex/Grid下正常收缩 */
  height: 100%; /* 固定为主容器高度，防止内容撑开整体布局 */
  overflow: hidden; /* 由子面板自身滚动，避免主列尺寸被消息改变 */
}

/* Left column rows */
#left-column {
  display: grid;
  grid-template-rows: auto auto; /* 默认按内容高度 */
  gap: 12px; /* 增加上下区域间距，避免挤在一起 */
}

/* Right column as flex column */
#right-column {
  display: flex;
  flex-direction: column;
  gap: 14px; /* 轻微增加右列内的垂直间距，保持协调 */
  height: 100%;
  min-height: 0; /* 允许内部chat区域按需滚动 */
}

#guidance-area {
  flex: 0 0 auto;
  min-height: 180px;
  max-height: 45vh; /* 适当延长引导文本区域上限高度 */
  overflow-y: auto;
}

#chat-area {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  overflow: hidden;
}

/* Visualizations area grid */
.left-column__top {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  min-width: 0;
}

/* ===== Large screen adjustments (enhanced alternative: clamp-based sizing) ===== */
@media (min-width: 1200px) and (min-height: 800px) {
  /* 保持主容器视口高度，方便背景填充 */
  .main-container { height: 100vh; }

  /* 右列采用网格与自适应行高，顶部指导区域稳定占比 */
  #right-column { display: grid; grid-template-rows: minmax(180px, 34vh) 1fr; }
  #guidance-area { max-height: none; height: auto; overflow-y: auto; }
  #chat-area { min-height: 0; }
}