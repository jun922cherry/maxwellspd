/* 
 * ============================================= 
 * PHASE FOURTEEN: DEFINITIVE LAYOUT STYLES 
 * DO NOT MODIFY WITHOUT AUTHORIZATION 
 * ============================================= 
 */ 

/* 0. 基础与重置 */ 
html, body, .app-wrapper { 
    height: 100%; 
    margin: 0; 
    padding: 0; 
    font-family: sans-serif; 
    background-color: #f0f2f5; /* 设置一个淡灰色背景以区分面板 */ 
}

/* ========== Phase Twenty-One: 引导语面板美学优化 ========== */

/* 提升引导语面板文本可读性 */
#guidance-area .panel-body {
    line-height: 1.8; /* 提升行间距，让文字不再拥挤 */
}

/* 核心洞察样式 - 醒目的样式用于包裹关键结论或核心提示 */
.insight-box {
    background-color: #eef7ff;     /* 淡雅的蓝色背景 */
    border-left: 4px solid #007bff; /* 左侧的蓝色强调线，突出重点 */
    padding: 16px;
    margin: 20px 0;                /* 上下留出足够的呼吸空间 */
    border-radius: 4px;
    font-size: 1.05em;             /* 字体稍大，更易于阅读 */
    color: #333;                   /* 深色文字保证对比度 */
}

/* 如果公式部分使用了<code>标签，为其添加特定样式 */
.insight-box code {
    background-color: #dbeafba3; /* 与背景协调的code背景色 */
    padding: 3px 6px;
    border-radius: 4px;
    font-family: 'Courier New', Courier, monospace;
}

/* ========== Phase Twenty-Two: 反馈模态窗口样式 ========== */

/* Modal and Chat Window Styles */
.modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    -webkit-backdrop-filter: blur(5px);
    backdrop-filter: blur(5px);
}

.chat-window-container {
    width: 650px;
    max-width: 90vw;
    height: 75vh;
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.chat-header {
    flex-shrink: 0;
    padding: 15px 25px;
    border-bottom: 1px solid #e0e0e0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.chat-header h3 {
    margin: 0;
}

#close-modal-btn {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: #888;
}

.chat-history {
    flex-grow: 1;
    padding: 20px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.message-wrapper {
    display: flex;
}

.message {
    padding: 12px 18px;
    border-radius: 18px;
    line-height: 1.5;
    max-width: 80%;
}

.message.assistant {
    background-color: #f1f0f0;
    border-bottom-left-radius: 4px;
}

.message.user {
    background-color: #007bff;
    color: white;
    border-bottom-right-radius: 4px;
}

.message-wrapper:has(.user) {
    justify-content: flex-end;
}

.chat-input-area {
    flex-shrink: 0;
    border-top: 1px solid #e0e0e0;
    padding: 15px 25px;
    background-color: #f9f9f9;
}

#feedback-textarea {
    width: 100%;
    height: 80px;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 8px;
    resize: vertical;
    margin-bottom: 15px;
}

.chat-buttons {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
}

.lock-message-box {
    background: white;
    padding: 40px 60px;
    border-radius: 12px;
    text-align: center;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
} 

/* 1. 顶层主容器 (Master Layout: 70% vs 30%) */ 
.main-container { 
    display: grid; 
    /* 核心战略: 创建左7 右3的列比例 */ 
    grid-template-columns: 7fr 3fr; 
    height: 100%; 
    gap: 20px; /* 主列之间的间距 */ 
    padding: 20px; 
    box-sizing: border-box; 
} 

/* 2. 主列的通用设置 */ 
.main-column { 
    display: grid; /* 每个主列自身也是一个网格容器 */ 
    gap: 20px; /* 行之间的间距 */ 
    min-width: 0; /* 防止内容溢出 */ 
    height: 100%; /* Phase Thirty-Four: 关键高度传递链修复 */ 
    
    /* 
     * --- 强制性修复指令 --- 
     * 这是一条强制性保险措施。它命令Grid容器(#left-column, #right-column) 
     * 无论其子项内容有多大，都绝对不能允许内容溢出自身边界。 
     * 这会强制子项（我们的panel）在其分配的空间内触发自己的滚动条， 
     * 而不是将父容器撑开。 
     */ 
    overflow: hidden; 
} 

/* 3. 左侧列布局 (Left Column Layout: 53% vs 47%) */ 
#left-column { 
    /* 
     * --- 核心战略修改 --- 
     * 调整为: grid-template-rows: 5.3fr 4.7fr; 
     * 
     * 解释: 
     * '5.3fr': 指示第一行（#visualizations-area）占据53%的空间 
     * '4.7fr': 指示第二行（#controls-area）占据47%的空间，稍微增加底部控制面板高度 
     */ 
    grid-template-rows: 5.3fr 4.7fr; 
} 

/* 4. 右侧列布局 (Right Column Layout: 50% vs 50%) */ 
#right-column { 
    /* 
     * --- 核心战略修改 --- 
     * 调整为: grid-template-rows: 1fr 1fr; 
     * 
     * 解释: 
     * '1fr': 指示第一行（#guidance-area）占据50%的空间 
     * '1fr': 指示第二行（#chat-area）占据50%的空间，增加下方聊天区域高度 
     */ 
    grid-template-rows: 1fr 1fr; 
} 

/* 5. 左侧上方区域布局 (可视化区域均分) */ 
.left-column__top { 
    display: grid; 
    /* 核心战略: 均分为两列 */ 
    grid-template-columns: 1fr 1fr; 
    gap: 20px; 
    min-width: 0; 
} 

/* 6. 定义通用面板样式 (统一所有区域的外观) */ 
.panel-container { 
    background-color: #ffffff; 
    border-radius: 8px; 
    padding: 16px; 
    box-shadow: 0 1px 3px rgba(0,0,0,0.05); 
    
    /* --- 质感提升动效 --- */ 
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
    transform: translateY(0); 
    
    /* --- 核心指令开始 --- */ 
    
    /* 
     * 指令 1: 启用自动滚动 
     * auto意味着只有在内容实际溢出时才会显示滚动条。 
     */ 
    overflow: auto; 
    
    /* 
     * 指令 2: 加固Grid/Flex布局稳定性 
     * 这可以防止面板内容过高时破坏父级Grid的行高比例。 
     * 它强制面板遵守其Grid分配的空间，从而正确触发内部滚动。 
     */ 
    min-height: 0; 
    
    /* --- 核心指令结束 --- */ 
    
    display: flex; /* 让面板内部内容更好地布局 */ 
    flex-direction: column; 
    /* height: 100%; 已移除 - 允许面板根据内容自适应高度 */ 
    box-sizing: border-box; /* 包含padding在内的尺寸计算 */ 
} 

/* 面板悬停效果 */ 
.panel-container:hover { 
    box-shadow: 0 4px 12px rgba(0,0,0,0.12); 
    transform: translateY(-2px); 
} 

/* Phase Thirty-Three: Flexbox弹性布局容器 */ 
#chat-area { 
    display: flex; 
    flex-direction: column; /* 关键：子元素垂直排列 */ 
    height: 100%; /* 确保容器自身有高度 */ 
} 
/* 聊天消息样式已移至文件末尾统一定义 */

.thinking-dots {
    display: flex;
    gap: 0.2rem;
}

.thinking-dots span {
    width: 6px;
    height: 6px;
    background-color: #6c757d;
    border-radius: 50%;
    animation: thinking-pulse 1.4s infinite ease-in-out;
}

.thinking-dots span:nth-child(1) {
    animation-delay: -0.32s;
}

.thinking-dots span:nth-child(2) {
    animation-delay: -0.16s;
}

@keyframes thinking-pulse {
    0%, 80%, 100% {
        opacity: 0.3;
        transform: scale(0.8);
    }
    40% {
        opacity: 1;
        transform: scale(1);
    }
} 
.chat-input-container {
    display: flex;
    gap: 8px;
    padding: 10px;
    border-top: 1px solid #e0e0e0;
    background-color: #f9f9f9;
    flex-shrink: 0; /* 关键：防止此区域在空间不足时被压缩 */
}

.chat-input { 
    flex: 1;
    border: 1px solid #ccc; 
    padding: 8px 12px; 
    border-radius: 6px;
    font-size: 14px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.chat-input:hover {
    border-color: #007bff;
    box-shadow: 0 2px 6px rgba(0, 123, 255, 0.15);
}

.chat-input:focus {
    outline: none;
    border-color: #007bff;
    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.2);
    transform: translateY(-1px);
}

/* ========== 保留的组件样式 ========== */
:root {
    --primary-color: #007bff;
    --secondary-color: #6c757d;
    --success-color: #28a745;
    --warning-color: #ffc107;
    --danger-color: #dc3545;
    --light-bg: #f8f9fa;
    --dark-text: #343a40;
    --border-color: #dee2e6;
    --panel-gap: 0.3rem;
}

* {
    box-sizing: border-box;
}

h2, h3 { margin-bottom: 0.25rem; color: #1a1a1a; padding-bottom: 0.25rem; border-bottom: 1px solid #f0f0f0; }

/*
 * =============================================
 * ZERO-TRUST LAYOUT STYLES - DO NOT MODIFY
 * =============================================
 */

/* 强制所有元素使用更可预测的盒模型 */
* {
    box-sizing: border-box;
}

/* 1. 最外层总容器 - 适配新的CSS Grid布局 */
.master-panel-container {
    display: flex;
    flex-direction: column; /* 垂直排列 网格内容 和 底部操作栏 */
    background-color: #ffffff;
    border-radius: 8px;
    padding: 16px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    height: 100%;
    overflow: hidden;
}

/* 2. 网格容器 (核心！) */
.panel-grid-container {
    display: grid;
    /* 核心指令: 创建两个等宽的列。这是您必须强制执行的 1:1 比例 */
    grid-template-columns: 1fr 1fr;
    width: 100%;
    flex: 1; /* 占用master-panel-container的剩余空间 */
    overflow: hidden; /* 防止内容溢出 */
}

/* 3. 网格项/面板本身 */
.grid-panel {
    padding: 20px;
    overflow-y: auto; /* 当内容超出时，此面板会出现滚动条 */
    height: auto; /* 根据内容自适应高度，避免底部空白过大 */
    min-width: 0; /* 防止内容撑破网格 */
}

/* 4. 添加垂直分割线 */
.grid-panel:first-child {
    border-right: 1px solid #dee2e6;
}

/* 5. 底部全局操作栏 */
.panel-actions-footer {
    display: flex;
    gap: 15px;
    padding: 15px 20px;
    background-color: #f8f9fa;
    border-top: 1px solid #dee2e6;
    justify-content: flex-start; /* 左对齐 */
}

.panel-actions-footer button {
    /* 移除flex: 1，让按钮根据内容自适应宽度 */
    min-width: 120px; /* 设置最小宽度保证美观 */
}

/*
 * =============================================
 * END OF ZERO-TRUST LAYOUT STYLES
 * =============================================
 */

/* 控制面板和指标区域的内部样式 */
.grid-panel h3 {
    font-size: 1.1rem;
    margin-bottom: 1rem;
    color: #2c3e50;
    border-bottom: 2px solid #3498db;
    padding-bottom: 0.5rem;
}

.control-group {
    margin-bottom: 1rem;
}

.control-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
    color: #34495e;
}

/* 滑块样式 - 温度和模拟粒子数滑块长度缩短为原来的一半 */
.slider, input[type="range"] {
    width: 90% !important; /* 调整为90% */
    height: 8px !important;
    border-radius: 4px !important;
    background: #ddd !important;
    outline: none !important;
    margin-bottom: 0.5rem !important;
    -webkit-appearance: none !important; /* 移除WebKit默认样式 */
    appearance: none !important; /* 移除默认样式 */
    display: block !important;
    position: relative !important;
}

/* WebKit浏览器 (Chrome, Safari) 滑块轨道样式 */
.slider::-webkit-slider-runnable-track, input[type="range"]::-webkit-slider-runnable-track {
    height: 6px;
    background: #ddd;
    border-radius: 3px;
    border: none;
}

/* WebKit浏览器滑块手柄样式 */
.slider::-webkit-slider-thumb, input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none !important;
    appearance: none !important;
    width: 20px !important;
    height: 20px !important;
    border-radius: 50% !important;
    background: #3498db !important;
    cursor: pointer !important;
    border: none !important;
    margin-top: -6px !important; /* 垂直居中对齐 */
    box-shadow: 0 2px 4px rgba(0,0,0,0.2) !important;
    transition: all 0.2s ease !important;
}

/* WebKit浏览器滑块手柄悬停效果 */
.slider::-webkit-slider-thumb:hover, input[type="range"]::-webkit-slider-thumb:hover {
    background: #2980b9;
    transform: scale(1.1);
}

/* Firefox浏览器滑块轨道样式 */
.slider::-moz-range-track, input[type="range"]::-moz-range-track {
    height: 6px;
    background: #ddd;
    border-radius: 3px;
    border: none;
}

/* Firefox浏览器滑块手柄样式 */
.slider::-moz-range-thumb, input[type="range"]::-moz-range-thumb {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #3498db;
    cursor: pointer;
    border: none;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    transition: all 0.2s ease;
}

/* Firefox浏览器滑块手柄悬停效果 */
.slider::-moz-range-thumb:hover, input[type="range"]::-moz-range-thumb:hover {
    background: #2980b9;
    transform: scale(1.1);
}

/* Edge/IE浏览器滑块样式 */
.slider::-ms-track, input[type="range"]::-ms-track {
    height: 6px;
    background: transparent;
    border-color: transparent;
    color: transparent;
}

.slider::-ms-fill-lower, input[type="range"]::-ms-fill-lower {
    background: #ddd;
    border-radius: 3px;
}

.slider::-ms-fill-upper, input[type="range"]::-ms-fill-upper {
    background: #ddd;
    border-radius: 3px;
}

.slider::-ms-thumb, input[type="range"]::-ms-thumb {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #3498db;
    cursor: pointer;
    border: none;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

/* 滑块聚焦状态样式 */
.slider:focus, input[type="range"]:focus {
    outline: none;
}

.slider:focus::-webkit-slider-thumb, input[type="range"]:focus::-webkit-slider-thumb {
    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.3);
}

.slider:focus::-moz-range-thumb, input[type="range"]:focus::-moz-range-thumb {
    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.3);
}

select {
    width: 100%;
    padding: 0.5rem;
    border: 1px solid #bdc3c7;
    border-radius: 6px;
    background-color: white;
    font-size: 0.9rem;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

select:hover {
    border-color: #3498db;
    box-shadow: 0 2px 6px rgba(52, 152, 219, 0.15);
}

select:focus {
    outline: none;
    border-color: #3498db;
    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
}

/* 新的按钮区域样式 - 位于关键速率指标下方 */
.indicators-actions {
    display: flex;
    gap: 15px;
    padding: 15px 0;
    margin-top: 15px;
    border-top: 1px solid #dee2e6;
    justify-content: center; /* 居中对齐 */
}

.indicators-actions button {
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 500;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    background-color: #3498db;
    color: white;
    min-width: 120px;
    box-shadow: 0 2px 4px rgba(52, 152, 219, 0.2);
    transform: translateY(0);
    position: relative;
    overflow: hidden;
}

.indicators-actions button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.5s;
}

.indicators-actions button:hover {
    background-color: #2980b9;
    box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
    transform: translateY(-2px);
}

.indicators-actions button:hover::before {
    left: 100%;
}

.indicators-actions button:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px rgba(52, 152, 219, 0.2);
}

/* 按钮基础样式 */
.panel-footer button {
    padding: 0.75rem;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 500;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    background-color: #3498db;
    color: white;
    box-shadow: 0 2px 4px rgba(52, 152, 219, 0.2);
    transform: translateY(0);
    position: relative;
    overflow: hidden;
}

.panel-footer button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.5s;
}

.panel-footer button:hover {
    background-color: #2980b9;
    box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
    transform: translateY(-2px);
}

.panel-footer button:hover::before {
    left: 100%;
}

.panel-footer button#reset-btn {
    background-color: #e74c3c;
    box-shadow: 0 2px 4px rgba(231, 76, 60, 0.2);
}

.panel-footer button#reset-btn:hover {
    background-color: #c0392b;
    box-shadow: 0 4px 12px rgba(231, 76, 60, 0.3);
}

/* 按钮样式 */
.btn {
    background-color: #3498db;
    color: white;
}

.btn:hover {
    background-color: #2980b9;
}

#start-pause-btn {
    background-color: #27ae60;
    color: white;
}

#start-pause-btn:hover {
    background-color: #219a52;
}

.btn-danger {
    background-color: #e74c3c;
    color: white;
}

.btn-danger:hover {
    background-color: #c0392b;
}

/* 指标表格样式 */
#metrics-panel table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 0.5rem;
    border-radius: 6px;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

#metrics-panel th,
#metrics-panel td {
    padding: 0.75rem 0.5rem;
    text-align: left;
    border-bottom: 1px solid #ecf0f1;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

#metrics-panel th {
    background-color: #f8f9fa;
    font-weight: 600;
    color: #2c3e50;
    font-size: 0.9rem;
    position: relative;
}

#metrics-panel th::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background-color: #3498db;
    transition: width 0.3s ease;
}

#metrics-panel th:hover::after {
    width: 100%;
}

#metrics-panel td {
    font-size: 0.85rem;
    color: #34495e;
}

#metrics-panel tbody tr {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

#metrics-panel tbody tr:hover {
    background-color: #f8f9fa;
    transform: translateX(4px);
    box-shadow: 4px 0 8px rgba(52, 152, 219, 0.1);
}

/* 关键指标表格优化样式 */
#key-indicators-table {
    width: 100%;
    table-layout: fixed;
}

#key-indicators-table th,
#key-indicators-table td {
    text-align: center;
}

#key-indicators-table th:first-child,
#key-indicators-table td:first-child {
    width: 60%;
    text-align: left;
}

#key-indicators-table th:last-child,
#key-indicators-table td:last-child {
    width: 40%;
    text-align: center;
    font-weight: 500;
    color: #2980b9;
}

/* 响应式适配：小屏幕时垂直堆叠 */
@media (max-width: 768px) {
    .panel-grid-container {
        grid-template-columns: 1fr; /* 小屏幕时改为单列 */
    }
    
    .grid-panel:first-child {
        border-right: none;
        border-bottom: 1px solid #dee2e6;
    }
    
    .panel-actions-footer {
        flex-direction: column;
        gap: 8px;
    }
}

/* 右侧面板布局 - 移除固定高度，让CSS Grid控制 */

/* Canvas 样式 */
canvas { 
    width: 100%; 
    height: 100%; /* 使用容器的全部高度 */
    max-height: 300px; /* 设置最大高度防止过度拉伸 */
    background-color: #fafafa; 
    border-radius: 8px; 
    object-fit: contain; /* 保持宽高比 */
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: 1px solid rgba(52, 152, 219, 0.1);
}

canvas:hover {
    box-shadow: 0 4px 16px rgba(0,0,0,0.15);
    transform: translateY(-2px);
    border-color: rgba(52, 152, 219, 0.2);
}

/* AI 聊天区域 - Phase Thirty-Three: 可伸缩聊天消息区域 */
.chat-messages {
    flex-grow: 1; /* 关键：占据所有剩余空间 */
    overflow-y: auto; /* 关键：当内容超出时，出现垂直滚动条 */
    padding: 15px;
    background-color: #fff;
    border-radius: 4px;
    margin-bottom: 10px;
    /* 移除固定高度限制，由flex-grow自动管理 */
}

.message {
    margin-bottom: 10px;
    padding: 12px 16px;
    border-radius: 12px;
    max-width: 80%;
    word-wrap: break-word;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    transform: translateY(0);
    opacity: 1;
    animation: messageSlideIn 0.4s ease-out;
}

@keyframes messageSlideIn {
    from {
        opacity: 0;
        transform: translateY(20px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.message:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.message.user {
    background-color: #007bff;
    color: white;
    margin-left: auto;
    text-align: right;
    box-shadow: 0 2px 8px rgba(0, 123, 255, 0.2);
}

.message.user:hover {
    box-shadow: 0 4px 16px rgba(0, 123, 255, 0.3);
}

.message.assistant {
    background-color: #f1f3f4;
    color: #333;
    margin-right: auto;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.message.assistant:hover {
    box-shadow: 0 4px 16px rgba(0,0,0,0.15);
}

#ask-ai-btn {
    padding: 10px 18px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    white-space: nowrap;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 2px 4px rgba(0, 123, 255, 0.2);
    transform: translateY(0);
    position: relative;
    overflow: hidden;
}

#ask-ai-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.5s;
}

#ask-ai-btn:hover {
    background-color: #0056b3;
    box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
    transform: translateY(-2px);
}

#ask-ai-btn:hover::before {
    left: 100%;
}

#ask-ai-btn:disabled {
    background-color: #ccc;
    cursor: not-allowed;
    box-shadow: none;
    transform: none;
}

#ask-ai-btn:disabled::before {
    display: none;
}

.conclusion-submit-container {
    margin-top: 10px;
    text-align: center;
}

#submit-conclusion-btn {
    padding: 12px 24px;
    background-color: #28a745;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
    font-weight: bold;
}

#submit-conclusion-btn:hover:not(:disabled) {
    background-color: #218838;
}

#submit-conclusion-btn:disabled {
    background-color: #6c757d;
    cursor: not-allowed;
    opacity: 0.6;
}

/* 规范化的禁用样式类 */
.btn-disabled {
    background-color: #cccccc; /* 灰色背景 */
    color: #666666;
    cursor: not-allowed;      /* 明确的禁用光标 */
    pointer-events: none;       /* 阻止任何点击事件 */
    opacity: 0.7;
}

/* 操作日志浮窗 */
#log-floater { position: fixed; top: 20px; right: 20px; width: 300px; max-height: 400px; background-color: white; border-radius: 12px; box-shadow: 0 8px 24px rgba(0,0,0,0.15); z-index: 1000; overflow: hidden; display: flex; flex-direction: column; backdrop-filter: blur(10px); transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); transform: translateY(0); }
#log-floater:hover { box-shadow: 0 12px 32px rgba(0,0,0,0.2); transform: translateY(-4px); }
#log-header { padding: 0.5rem 1rem; background-color: #f7f7f7; display: flex; justify-content: space-between; align-items: center; cursor: pointer; border-bottom: 1px solid #e8e8e8; }
#toggle-log-btn { background: none; border: 1px solid #ccc; border-radius: 50%; width: 20px; height: 20px; line-height: 18px; text-align: center; cursor: pointer;}
#log-content { padding: 1rem; overflow-y: auto; }
#log-floater.collapsed #log-content { display: none; }

/* 知识焦点框样式 - 用于突出定量分析模块 */
.focus-box {
    background-color: #f0f4f8; /* 更柔和的淡灰色背景 */
    border-left: 5px solid #4A90E2; /* 专业蓝色的强调线 */
    padding: 1.5rem;
    margin: 1rem 0;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(74, 144, 226, 0.1);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
}

.focus-box::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 4px;
    background: linear-gradient(90deg, #4A90E2, #357ABD, #4A90E2);
    background-size: 200% 100%;
    animation: shimmer 2s ease-in-out infinite;
}

@keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
}

.focus-box:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(74, 144, 226, 0.2);
    border-left-color: #357ABD;
}

.focus-box p {
    margin: 8px 0;
    line-height: 1.6;
    transition: color 0.3s ease;
}

.focus-box:hover p {
    color: #2c3e50;
}

.focus-box .formula {
    font-family: 'Courier New', Courier, monospace;
    font-weight: bold;
    color: #333;
    transition: color 0.3s ease;
}

.focus-box:hover .formula {
    color: #4A90E2;
}

/* 输入错误抖动动画 - 用于替代alert()提示 */
@keyframes shake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
    20%, 40%, 60%, 80% { transform: translateX(5px); }
}

.shake-animation {
    animation: shake 0.6s ease-in-out;
    border-color: #dc3545 !important; /* 红色边框表示错误 */
    box-shadow: 0 0 0 2px rgba(220, 53, 69, 0.25) !important;
}

/* 页面锁定蒙版样式 */
#page-lock-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, rgba(0, 0, 0, 0.4), rgba(52, 152, 219, 0.2));
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    -webkit-backdrop-filter: blur(8px); /* Safari 9+ support */
    backdrop-filter: blur(8px);
    animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        backdrop-filter: blur(0px);
    }
    to {
        opacity: 1;
        backdrop-filter: blur(8px);
    }
}

.lock-message {
    background: rgba(255, 255, 255, 0.95);
    padding: 40px;
    border-radius: 16px;
    text-align: center;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    max-width: 400px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
    animation: slideIn 0.4s ease-out 0.1s both;
}

@keyframes slideIn {
    from {
        transform: translateY(30px) scale(0.9);
        opacity: 0;
    }
    to {
        transform: translateY(0) scale(1);
        opacity: 1;
    }
}

.lock-message h3 {
    margin: 0 0 15px 0;
    color: #28a745;
}

.lock-message p {
    margin: 0;
    color: #666;
    line-height: 1.5;
}